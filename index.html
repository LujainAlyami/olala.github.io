<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(135deg,#1e3c72,#2a5298);
color:white;
text-align:center;
}

h1{
margin-top:20px;
}

#game-board{
display:grid;
grid-template-columns:repeat(4,1fr);
gap:12px;
justify-content:center;
margin:20px;
}

.card{
width:100px;
height:120px;
perspective:1000px;
cursor:pointer;
}

.card-inner{
width:100%;
height:100%;
position:relative;
transform-style:preserve-3d;
transition:0.6s;
}

.card.flipped .card-inner{
transform:rotateY(180deg);
}

.card-front,.card-back{
position:absolute;
width:100%;
height:100%;
backface-visibility:hidden;
border-radius:10px;
}

.card-front{
background:#ffcc70;
}

.card-back{
transform:rotateY(180deg);
background:white;
display:flex;
align-items:center;
justify-content:center;
font-size:30px;
}
</style>
</head>

<body>

<h1>ğŸ® ØºØ±ÙØ© Ø¬Ù…Ø§Ø¹ÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø©</h1>
<div id="game-board"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>

const firebaseConfig = {
  apiKey: "AIzaSyD6uCfq2o4zaimOqjz-_tVkukpgLp7rZIQ",
  authDomain: "ola-cards.firebaseapp.com",
  databaseURL: "https://ola-cards-default-rtdb.firebaseio.com",
  projectId: "ola-cards",
  storageBucket: "ola-cards.firebasestorage.app",
  messagingSenderId: "40775529581",
  appId: "1:40775529581:web:8040ea60cba212401afb64"
};

firebase.initializeApp(firebaseConfig);
const database = firebase.database();

const images=["ğŸŒ","â˜•","ğŸ™ï¸","ğŸŒ…","ğŸ”ï¸","ğŸœï¸","ğŸŒ†","ğŸ›ï¸"];

let flipped=[];

// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø£ÙˆÙ„ Ù…Ø±Ø©
database.ref("room").once("value",snapshot=>{
if(!snapshot.exists()){
let cards=[...images,...images];
cards.sort(()=>0.5-Math.random());

database.ref("room").set({
cards:cards.map(c=>({value:c,flipped:false}))
});
}
});

// Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª
database.ref("room/cards").on("value",snapshot=>{
const board=document.getElementById("game-board");
board.innerHTML="";
snapshot.val().forEach((card,i)=>{
let div=document.createElement("div");
div.className="card"+(card.flipped?" flipped":"");

div.innerHTML=`
<div class="card-inner">
<div class="card-front"></div>
<div class="card-back">${card.value}</div>
</div>`;

div.onclick=()=>flipCard(i,card.flipped);
board.appendChild(div);
});
});

function flipCard(index,alreadyFlipped){
if(alreadyFlipped) return;

database.ref("room/cards/"+index).update({
flipped:true
});
}

</script>
</body>
</html>
